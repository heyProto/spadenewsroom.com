function transition(a,b){b=void 0!==b&&b,"inline-block"===$(".reset-filters").css("display")&&$(".reset-filters").click(),$(".explore-tooltip").remove(),blockExplorePrevAndNext();var c=setTimeout(function(){unblockExplorePrevAndNext(),clearTimeout(c)},2e3);switch(a){case"1":if(b){x1=d3.select("#s_ep5_sp2").node().getBBox().x,y1=d3.select("#s_ep5_sp2").node().getBBox().y,h1=d3.select("#s_ep5_sp2").node().getBBox().height,w1=d3.select("#s_ep5_sp2").node().getBBox().width,d3.select("svg").transition().duration(2e3).attr("viewBox",x1+" "+y1+" "+w1+" "+h1).attr("preserveAspectRatio","xMidYMid meet");var d=setTimeout(function(){attachTooltipEvents(a),clearTimeout(d)},2e3);desc_var.html(""),desc_var.html('<div class="sub-heading">Workstation</div><p>A Workstation is the most basic component in the SPADE work/organisation structure. The one seen here, as will become clear in the next steps, is occupied by specialists widthh five or more years of experience, designated as Chief or Senior Producers.</p>')}else x2=d3.select("#tripod-table-2_3_").node().getBBox().x,y2=d3.select("#tripod-table-2_3_").node().getBBox().y,h2=d3.select("#tripod-table-2_3_").node().getBBox().height,w2=d3.select("#tripod-table-2_3_").node().getBBox().width,d3.select("svg").transition().duration(2e3).attr("viewBox",x2+" "+y2+" "+w2+" "+h2).attr("preserveAspectRatio","xMidYMid meet"),$("#chair_214_").unbind("mouseover"),$("#chair_214_").unbind("mouseout"),$("#keyboard_19_").unbind("mouseover"),$("#keyboard_19_").unbind("mouseout"),$("#pc-screen_67_").unbind("mouseover"),$("#pc-screen_67_").unbind("mouseout"),desc_var.html(""),desc_var.html('<div class="sub-heading">Tripod</div><p>Three workstations form a Tripod. The two outer workstations are occupied by beginners with at most three years of experience, designated Associate, Assistant or Trainee Producers.</p><p>Each tripod is hired, mentored and led by its Chief/Senior Producer. This person ensures that received assignments are clear to everyone and get done on time.</p><p>Tripod meetings are open, quick and easy because all that the three producers need to do is talk across the table.</p>');d3.select("#s_ep5_sp2_emp1").transition().duration(2e3).style("opacity",b?.1:1),d3.select("#s_ep5_sp2_emp2").transition().duration(2e3).delay(1e3).style("opacity",b?.1:1),d3.select("#hole_4_").transition().duration(2e3).style("opacity",b?.1:1),document.getElementById("explore-title").style.display="none";break;case"2":b?(x2=d3.select("#tripod-table-2_3_").node().getBBox().x,y2=d3.select("#tripod-table-2_3_").node().getBBox().y,h2=d3.select("#tripod-table-2_3_").node().getBBox().height,w2=d3.select("#tripod-table-2_3_").node().getBBox().width,d3.select("svg").transition().duration(2e3).attr("viewBox",x2+" "+y2+" "+w2+" "+h2).attr("preserveAspectRatio","xMidYMid meet"),desc_var.html(""),desc_var.html('<div class="sub-heading">Tripod</div><p>Three workstations form a Tripod. The two outer workstations are occupied by beginners with at most three years of experience, designated Associate, Assistant or Trainee Producers.</p><p>Each tripod is hired, mentored and led by its Chief/Senior Producer. This person ensures that received assignments are clear to everyone and get done on time.</p><p>Tripod meetings are open, quick and easy because all that the three producers need to do is talk across the table.</p>')):(x3=d3.select("#hub-1 #desk5").node().getBBox().x,y3=d3.select("#hub-1 #desk5").node().getBBox().y,h3=d3.select("#hub-1 #desk5").node().getBBox().height,w3=d3.select("#hub-1 #desk5").node().getBBox().width,d3.select("svg").transition().duration(2e3).attr("viewBox",x3+" "+y3+" "+w3+" "+h3).attr("preserveAspectRatio","xMidYMid meet"),desc_var.html(""),desc_var.html('<div class="sub-heading">Desk</div><p>Three tripods — and the quad-mounted vertical screens between them — form a Desk. Each tripod in a desk specialises in a particular sub-function.</p><p>The producers across each such desk bring in diverse skillsets and toolkits, but are all organised to collaborate towards a shared deliverable.</p>')),d3.select("#tripod-table-1_3_").transition().duration(2e3).delay(1e3).style("opacity",b?.1:1),d3.select("#tripod-table-3_3_").transition().duration(2e3).delay(2e3).style("opacity",b?.1:1),d3.select("#connection-1_3_").transition().duration(2e3).style("opacity",b?.1:1),d3.select("#connection-2_3_").transition().duration(2e3).style("opacity",b?.1:1);var d=setTimeout(function(){attachTooltipEvents(a),clearTimeout(d)},2e3);break;case"3":if(b){x3=d3.select("#hub-1 #desk5").node().getBBox().x,y3=d3.select("#hub-1 #desk5").node().getBBox().y,h3=d3.select("#hub-1 #desk5").node().getBBox().height,w3=d3.select("#hub-1 #desk5").node().getBBox().width,d3.select("svg").transition().duration(2e3).attr("viewBox",x3+" "+y3+" "+w3+" "+h3).attr("preserveAspectRatio","xMidYMid meet");var d=setTimeout(function(){attachTooltipEvents("2"),clearTimeout(d)},2e3);desc_var.html(""),desc_var.html('<div class="sub-heading">Desk</div><p>Three tripods — and the quad-mounted vertical screens between them — form a Desk. Each tripod in a desk specialises in a particular sub-function.</p><p>The producers across each such desk bring in diverse skillsets and toolkits, but are all organised to collaborate towards a shared deliverable.</p>')}else d3.select("svg").transition().duration(2e3).attr("viewBox",x3+" "+y3+" "+w3+" "+h3).attr("preserveAspectRatio","xMidYMid meet"),desc_var.html(""),desc_var.html('<div class="sub-heading">Desk lead</div><p>Each chief/senior producer — and hence the whole desk — is hired, mentored and led by an Executive Producer, with at least eight years of experience. This person brings daily operational oversight, which includes allocating shifts, tasks, priorities, targets, experiments, and ensuring compliance with frameworks.</p><p>Desk meetings too are open, quick and easy because all that the chief/senior producers leading each tripod need to do is turn around.</p>');d3.select("#s_ep5").transition().duration(2e3).style("opacity",b?.1:1);break;case"4":b?(x3=d3.select("#hub-1 #desk5").node().getBBox().x,y3=d3.select("#hub-1 #desk5").node().getBBox().y,h3=d3.select("#hub-1 #desk5").node().getBBox().height,w3=d3.select("#hub-1 #desk5").node().getBBox().width,d3.select("svg").transition().duration(2e3).attr("viewBox",x3+" "+y3+" "+w3+" "+h3).attr("preserveAspectRatio","xMidYMid meet"),desc_var.html(""),desc_var.html('<div class="sub-heading">Desk lead</div><p>Each chief/senior producer — and hence the whole desk — is hired, mentored and led by an Executive Producer, with at least eight years of experience. This person brings daily operational oversight, which includes allocating shifts, tasks, priorities, targets, experiments, and ensuring compliance with frameworks.</p><p>Desk meetings too are open, quick and easy because all that the chief/senior producers leading each tripod need to do is turn around.</p>')):(x4=d3.select("#hub-1").node().getBBox().x,y4=d3.select("#hub-1").node().getBBox().y,h4=d3.select("#hub-1").node().getBBox().height,w4=d3.select("#hub-1").node().getBBox().width,d3.select("svg").transition().duration(2e3).attr("viewBox",x4+" "+y4+" "+w4+" "+h4).attr("preserveAspectRatio","xMidYMid meet"),desc_var.html(""),desc_var.html('<div class="sub-heading">Hub</div><p>Six desks form a Hub. Each desk in a hub is accountable for a distinct set of deliverables, which collectively complete a whole stage in the content supply chain.</p><p>Each desk is positioned next to others in the same or adjacent hub, basis its dependence on the others deliverables.</p>')),d3.select("#hub-1 #desk6").transition().duration(2e3).delay(1e3).style("opacity",b?.1:1),d3.select("#hub-1 #desk1").transition().duration(2e3).delay(1500).style("opacity",b?.1:1),d3.select("#hub-1 #desk2").transition().duration(2e3).delay(2e3).style("opacity",b?.1:1),d3.select("#hub-1 #desk3").transition().duration(2e3).delay(2500).style("opacity",b?.1:1),d3.select("#hub-1 #desk4").transition().duration(2e3).delay(3e3).style("opacity",b?.1:1);break;case"5":b?(x4=d3.select("#hub-1").node().getBBox().x,y4=d3.select("#hub-1").node().getBBox().y,h4=d3.select("#hub-1").node().getBBox().height,w4=d3.select("#hub-1").node().getBBox().width,d3.select("svg").transition().duration(2e3).attr("viewBox",x4+" "+y4+" "+w4+" "+h4).attr("preserveAspectRatio","xMidYMid meet"),desc_var.html(""),desc_var.html('<div class="sub-heading">Hub</div><p>Six desks form a Hub. Each desk in a hub is accountable for a distinct set of deliverables, which collectively complete a whole stage in the content supply chain.</p><p>Each desk is positioned next to others in the same or adjacent hub, basis its dependence on the others deliverables.</p>')):(d3.select("svg").transition().duration(2e3).attr("viewBox",x4+" "+y4+" "+w4+" "+h4).attr("preserveAspectRatio","xMidYMid meet"),desc_var.html(""),desc_var.html('<div class="sub-heading">Hub lead</div><p>Each Executive Producer — and hence the whole hub — is hired, mentored and led by a Managing or Deputy Managing Producer, with at least eight years of experience. This duo brings strategic oversight, which includes building the right team, communicating the vision, and ensuring access to resources and training.</p><p>Hub meetings too are open, quick and easy because all that the executive producers leading each desk need to do is turn around. That said, the central conference table does have room in/outside along it’s perimeter for larger discussions.</p>')),d3.select("#s_mp").transition().duration(2e3).style("opacity",b?.1:1);break;case"6":b?(x4=d3.select("#hub-1").node().getBBox().x,y4=d3.select("#hub-1").node().getBBox().y,h4=d3.select("#hub-1").node().getBBox().height,w4=d3.select("#hub-1").node().getBBox().width,d3.select("svg").transition().duration(2e3).attr("viewBox",x4+" "+y4+" "+w4+" "+h4).attr("preserveAspectRatio","xMidYMid meet"),desc_var.html(""),desc_var.html('<div class="sub-heading">Hub lead</div><p>Each Executive Producer — and hence the whole hub — is hired, mentored and led by a Managing or Deputy Managing Producer, with at least eight years of experience. This duo brings strategic oversight, which includes building the right team, communicating the vision, and ensuring access to resources and training.</p><p>Hub meetings too are open, quick and easy because all that the executive producers leading each desk need to do is turn around. That said, the central conference table does have room in/outside along it’s perimeter for larger discussions.</p>')):(x5=d3.select("#hubs").node().getBBox().x,y5=d3.select("#hubs").node().getBBox().y,h5=d3.select("#hubs").node().getBBox().height,w5=d3.select("#hubs").node().getBBox().width,d3.select("svg").transition().duration(2e3).attr("viewBox",x5+" "+y5+" "+w5+" "+h5).attr("preserveAspectRatio","xMidYMid meet"),desc_var.html(""),desc_var.html('<div class="sub-heading">Newsroom</div><p>Four hubs — one each for Sourcing, Production, Assembling and Distribution — complete the omnimedia content supply chain.</p><p>Use the filters menu to your left, for a functional and hierarchical drilldown of hubs, desks and tripods.</p><p>Use the label mode toggle to push the drawing back and focus on the positions of various desks and their relationships with each other.</p>'),$("#svg").css("pointer-events","none")),d3.select("#hub-2").transition().duration(2e3).delay(1e3).style("opacity",b?.1:1),d3.select("#hub-3").transition().duration(2e3).delay(1500).style("opacity",b?.1:1),d3.select("#hub-4").transition().duration(2e3).delay(2e3).style("opacity",b?.1:1);break;case"7":b?(x5=d3.select("#hubs").node().getBBox().x,y5=d3.select("#hubs").node().getBBox().y,h5=d3.select("#hubs").node().getBBox().height,w5=d3.select("#hubs").node().getBBox().width,d3.select("svg").transition().duration(2e3).attr("viewBox",x5+" "+y5+" "+w5+" "+h5).attr("preserveAspectRatio","xMidYMid meet"),desc_var.html(""),desc_var.html('<div class="sub-heading">Newsroom</div><p>Four hubs - multi-screen Sourcing, Production, Assembling, Distribution (SPADe) - complete the omnimedia content supply chain. </p>')):(x6=d3.select("#spade").node().getBBox().x,y6=d3.select("#spade").node().getBBox().y,h6=d3.select("#spade").node().getBBox().height,w6=d3.select("#spade").node().getBBox().width,d3.select("svg").transition().duration(2e3).attr("viewBox",x6+" "+y6+" "+w6+" "+h6).attr("preserveAspectRatio","xMidYMid meet"),desc_var.html(""),desc_var.html('<div class="sub-heading">explore workflow</div><p>Use the filters menu to your left, for a functional and hierarchical drilldown of hubs, desks and tripods.</p><p>Use the label mode toggle to push the drawing back and focus on the positions of various desks and their relationships with each other.</p>')),d3.selectAll(".others").style("opacity",.1),$("#svg").css("pointer-events","all")}}function sideBar(){filters=document.createElement("div"),filters.id="filters",filters.className="filter-area",collapsable_filter.appendChild(filters),$.ajax({type:"GET",url:"http://cms.spadenewsroom.com/reference_list",headers:{"Content-Type":"application/json"},success:function(a){if(a.success){d=a.data;var b,c,e=d.skills,f=d.toolset,g=(d.availability,d.seniority,d.hub,d.desk,d.shifts),h=["Sourcing","Production","Assembling","Distribution"],i=[["Alerts Desk","Assignment Desk","Research Desk","Control Desk","Culture Desk","Support Desk"],["Home Bureau","Copy Desk","Design Desk","Multimedia Desk","Interactives Desk","Studio Desk"],["Mobile Desk","Web Desk","ePrint Desk","Radio Desk","TV Desk","Shows Desk"],["Seeding Desk","Engagement Desk","Growth Desk","Campaigns Desk","Events Desk","Ads Desk"]],j='<div style="position: relative;"><div class="available-filter" value="label-toogle">Labels</div><input type="checkbox" class="available" id="label_toogle" name="" value="label_toogle"><div class="toggle"><label for="label_toogle"><i></i></label></div></div>',k='<div><div class="shift-options-collapsable"><div class="shift-options-title">Shifts</div><div class="arrow-down"></div></div><div class="shift-options" style="display:none;">';for(g.unshift("All"),b=0;b<g.length;b++)k+='<div style="position: relative;">',k+='<div class="shift-filter" value="'+g[b]+'">'+g[b]+"</div>",k+='<input type="checkbox" class="shifts" id="'+g[b]+'" name="" value="'+g[b]+'"><div class="toggle"><label for="'+g[b]+'"><i></i></label></div>',k+="</div>";k+="</div>";var l="<div>";for(b=0;b<h.length;b++){for(l+='<div><div class="hub-option-collapsable"><div class="hub-option">'+h[b]+' Hub</div><div class="arrow-down"></div></div><div class="hub-desk-options" style="display:none;">',c=0;c<i[b].length;c++)l+='<div class="hub-desk-option">'+i[b][c]+"</div>";l+="</div></div>"}var m='<div class="searchable-filter-div"><div class="filter-title">Seniority</div><div class="seniority-options">';for(var n in experience_text)m+='<div class="seniority-option" value="'+n+'">'+n+" ("+experience_text[n]+")</div>";m+="</div></div>";var o='<div class="searchable-filter-div"><div class="filter-title">Skillset</div><input type="text" id="skill_search" class="filter-search" placeholder="Search"></input><div class="skills-options">';for(b=0;b<e.length;b++)o+='<div class="skills-option" value="'+e[b]+'">'+e[b].split("-").join("—")+"</div>";o+="</div></div>";var p='<div class="searchable-filter-div"><div class="filter-title">Toolkit</div><input type="text" id="toolset_search" class="filter-search" placeholder="Search"></input><div class="toolset-options">';for(b=0;b<f.length;b++)p+='<div class="toolset-option" value="'+f[b]+'">'+f[b]+"</div>";p+="</div></div>";var q='<div style="position: relative;"><div class="available-filter" value="hiring">Hiring</div><input type="checkbox" class="available" id="hiring" name="" value="hiring"><div class="toggle"><label for="hiring"><i></i></label></div></div>';filters.innerHTML=j+l+m+o+p+q+k,$(".hub-option-collapsable").on("click",function(){if($(".seniority-option").removeClass("active"),$(".skills-option").removeClass("active"),$(".toolset-option").removeClass("active"),$("#hiring")[0].checked=!1,$(".shifts").attr("checked",null),"none"===$(this).parent().find(".hub-desk-options").css("display")){var a=$(this).find(".hub-option");$(".hub-option").removeClass("active"),a.addClass("active"),$(this).parent().find(".hub-desk-options").css("display","block")}else $(this).parent().find(".hub-desk-options").css("display","none")}),$(".hub-desk-option").on("click",function(){$(".seniority-option").removeClass("active"),$(".skills-option").removeClass("active"),$(".toolset-option").removeClass("active"),$("#hiring")[0].checked=!1,$(".shifts").attr("checked",null),$(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active"),filteredData(),showFilterReset()}),$(".seniority-option").on("click",function(){$(this).hasClass("active")?$(this).removeClass("active"):($(".seniority-option").removeClass("active"),$(".hub-option").removeClass("active"),$(".hub-desk-option").removeClass("active"),$(".shifts").attr("checked",null),$("#hiring")[0].checked=!1,$(this).addClass("active")),filteredData(),showFilterReset(),updateSkillsAndToolsetFilters("both")}),$(".skills-option").on("click",function(){$(this).hasClass("active")?$(this).removeClass("active"):($(".skills-option").removeClass("active"),$(".hub-option").removeClass("active"),$(".hub-desk-option").removeClass("active"),$(".shifts").attr("checked",null),$("#hiring")[0].checked=!1,$(this).addClass("active")),filteredData(),showFilterReset(),updateSkillsAndToolsetFilters("toolset")}),$("#skill_search").on("keyup",function(){var a=$(this).val().toLowerCase();$(".skills-option").map(function(b,c){c.getAttribute("value").toLowerCase().indexOf(a)===-1?c.style.display="none":c.style.display="block"})}),$(".toolset-option").on("click",function(){$(this).hasClass("active")?$(this).removeClass("active"):($(".toolset-option").removeClass("active"),$(".hub-option").removeClass("active"),$(".hub-desk-option").removeClass("active"),$(".shifts").attr("checked",null),$("#hiring")[0].checked=!1,$(this).addClass("active")),filteredData(),showFilterReset()}),$("#toolset_search").on("keyup",function(){var a=$(this).val().toLowerCase();$(".toolset-option").map(function(b,c){c.getAttribute("value").toLowerCase().indexOf(a)===-1?c.style.display="none":c.style.display="block"})}),$(".shift-filter").on("click",function(){$(".hub-option").removeClass("active"),$(".hub-desk-option").removeClass("active"),$(".seniority-option").removeClass("active"),$(".skills-option").removeClass("active"),$(".toolset-option").removeClass("active"),$(".shifts").attr("checked",null),$("#hiring")[0].checked=!1,$(this).addClass("active"),filteredData(),showFilterReset()}),$(".shift-options-collapsable").on("click",function(){"none"===$(this).parent().find(".shift-options").css("display")?($(this).parent().find(".shift-options").css("display","block"),$(".filter-area").scrollTop($(".filter-area").height())):$(this).parent().find(".shift-options").css("display","none")}),$("#hiring").on("change",function(){$(".hub-option").removeClass("active"),$(".hub-desk-option").removeClass("active"),$(".seniority-option").removeClass("active"),$(".skills-option").removeClass("active"),$(".toolset-option").removeClass("active"),$(".shifts").attr("checked",null),filteredData(),showFilterReset()}),$(".shifts").on("change",function(){$(".shifts[value!="+this.value+"]").attr("checked",null),filteredData(),showFilterReset()}),$("#label_toogle").on("change",function(){this.checked?$("#label_display").css("display","block"):$("#label_display").css("display","none")}),$(".reset-filters").on("click",function(){$(".hub-option").removeClass("active"),$(".hub-desk-option").removeClass("active"),$(".seniority-option").removeClass("active"),$(".skills-option").removeClass("active"),$(".toolset-option").removeClass("active"),$("#hiring")[0].checked=!1,$(".shifts").attr("checked",null),filteredData(!0),hideFilterReset()})}},error:function(a){}})}function zoom(){zoom=d3.select("#svg").call(d3.behavior.zoom().scaleExtent([1,10]).on("zoom",function(){d3.select("#spade").attr("transform","translate("+d3.event.translate+") scale("+d3.event.scale+")")}))}function showOthersTooltip(a,b){var c=b[0].getBoundingClientRect(),d=b.attr("id");$("body").append('<div class="explore-tooltip" value="'+d+'"><div class="explore-tooltip-text">'+a+'</div><div class="dropup-caret"></div></div>');var e=+$(".explore-tooltip[value='"+d+"']").css("width").split("px")[0],f=c.left+c.width/2-e/2-10;$(".explore-tooltip[value='"+d+"']").css("left",f+"px").css("top",c.top-35+"px"),$(".explore-tooltip[value='"+d+"'] .dropup-caret").css("left",e/2+5+"px")}function showDescription(a){$.ajax({type:"GET",url:"http://cms.spadenewsroom.com/descriptions/"+a,headers:{"Content-Type":"application/json"},success:function(a){if(a.success){var b=document.getElementById("description_panel");desc_data=a.description,filter_data=a.filter,b.innerHTML="";var c='<div class="slug-title">'+filter_data.slug+"</div>";if(""!==desc_data.hub_description&&(c+="<div>"+filter_data.hub+" Hub</div>"+desc_data.hub_description),""!==desc_data.desk_description&&(c+="Home Bureau"===filter_data.desk?"</br><div>"+filter_data.desk+"</div>"+desc_data.desk_description:"</br><div>"+filter_data.desk+" Desk</div>"+desc_data.desk_description),""!==desc_data.role_description&&(c+="</br><div> Role Description</div>"+desc_data.role_description),""!==desc_data.persona_description&&(c+="</br><div> Persona Description</div>"+desc_data.persona_description),""!==filter_data.skills){var d,e,f=filter_data.skills.split(","),g=filter_data.skills.split("-").join("—"),h="";for(g=g.split(","),d=g.length,e=0;e<d;e++)h+="<span class='skills-in-description' data-skill='"+f[e]+"'>"+g[e]+"</span>,";c+="</br><div> Skillset</div>"+h}if(""!==filter_data.toolset){var i=filter_data.toolset.split(",").join(",  ");i=i.split("-").join("—"),c+="</br><div> Toolkit</div>"+i}b.innerHTML=c,$(".skills-in-description").on("click",function(){onClickOfSkills(this)}),document.getElementById("description_panel").style.display="block"}},error:function(a){}})}function filteredData(a){var b="",c=$(".hub-desk-option.active"),d="",e=$("#hiring")[0].checked?"Hiring":"",f=$(".shifts:checked").val(),g=$(".seniority-option.active"),h="";c.map(function(a,b){d+=b.innerHTML.split(" Desk")[0],a<c.length-1&&(d+=",")}),g.map(function(a,b){h+=b.getAttribute("value"),a<g.length-1&&(h+=",")}),f="All"===f?void 0:f;var i,j={filter:{hub:b,desk:d,seniority:h,shifts:f,availability:e,skills:$(".skills-option.active").attr("value"),toolset:$(".toolset-option.active").text()}},k=0;for(i in j.filter)""!==j.filter[i]&&void 0!==j.filter[i]||k++;return 7===k?(deHighlightAll(),highlightAll(),void(a&&hideFilterReset())):void $.ajax({type:"POST",url:"http://cms.spadenewsroom.com/filters/query",headers:{"Content-Type":"application/json"},data:JSON.stringify(j),success:function(a){if(deHighlightAll(),a.success){result=a.message;var b;for(b=0;b<result.length;b++){var c=$("#"+result[b].seat_id);c.find(".table");c.attr("data-og-opacity",1),c.css("opacity",1),c.attr("is_clicked","yes")}}},error:function(a){}})}function updateSkillsAndToolsetFilters(a){var b=$(".seniority-option.active"),c="";b.map(function(a,d){c+=d.getAttribute("value"),a<b.length-1&&(c+=",")});var d={filter:{hub:"",desk:"",seniority:c,shifts:"",availability:"",skills:"",toolset:""}};if("toolset"===a){var e=$(".skills-option.active"),f="";e.map(function(a,b){f+=b.getAttribute("value"),a<e.length-1&&(f+=",")}),d.filter.skills=f}$.ajax({type:"POST",url:"http://cms.spadenewsroom.com/filters/query",headers:{"Content-Type":"application/json"},data:JSON.stringify(d),success:function(b){if(b.success){result=b.message;var c,d,e=[],f=[];for(d=0;d<result.length;d++){if("both"===a)for(c=result[d].skills.split(","),j=0;j<c.length;j++)e.indexOf(c[j])===-1&&e.push(c[j]);for(c=result[d].toolset.split(","),j=0;j<c.length;j++)f.indexOf(c[j])===-1&&f.push(c[j])}"both"===a&&$(".skills-option").map(function(a,b){e.indexOf(b.getAttribute("value"))===-1&&(b.style.opacity="0.5",b.style.pointerEvents="none",$(b).removeClass("active"))}),$(".toolset-option").map(function(a,b){f.indexOf(b.getAttribute("value"))===-1&&(b.style.opacity="0.5",b.style.pointerEvents="none",$(b).removeClass("active"))})}},error:function(a){}})}function deHighlightAll(){$("#hubs .table").each(function(a,b){var c=$(b),d=c.closest("g"),e=d.attr("data-og-opacity");e||d.attr("data-og-opacity",c.attr("opacity")),"true"!==d.attr("data-bypass")&&d.css("opacity",.3)}),$(".connection").css("opacity",.3),$(".hole").css("opacity",.3)}function highlightAll(){$("#hubs .table").each(function(a,b){var c=$(b),d=c.closest("g");"true"!==d.attr("data-bypass")&&d.css("opacity",1)}),$(".connection").css("opacity",1),$(".hole").css("opacity",1)}function showTooltip(a,b,c){$("body").append('<div class="explore-tooltip" value="'+c+'"><div class="explore-tooltip-text">'+a+'</div><div class="dropup-caret"></div></div>');var d=+$(".explore-tooltip[value='"+c+"']").css("width").split("px")[0],e=b.left+b.width/2-d/2-10;"Table"===a?$(".explore-tooltip[value='"+c+"']").css("left",e+30+"px").css("top",b.top+30+"px"):"Connection Table"===a?$(".explore-tooltip[value='"+c+"']").css("left",e+30+"px").css("top",b.top-10+"px"):"Vertical Screen"===a?$(".explore-tooltip[value='"+c+"']").css("left",e+"px").css("top",b.top-30+"px"):$(".explore-tooltip[value='"+c+"']").css("left",e+"px").css("top",b.top-30+"px"),$(".explore-tooltip[value='"+c+"'] .dropup-caret").css("left",d/2+5+"px")}function attachTooltipEvents(a){switch(a){case"1":showTooltip("Chair",$("#chair_214_")[0].getBoundingClientRect(),"chair_214_"),showTooltip("Keyboard",$("#keyboard_19_")[0].getBoundingClientRect(),"keyboard_19_"),showTooltip("Screen",$("#pc-screen_67_")[0].getBoundingClientRect(),"pc-screen_67_"),showTooltip("Table",$("#sp-table_17_")[0].getBoundingClientRect(),"sp-table_17_");break;case"2":showTooltip("Connection Table",$("#connection-table_8_")[0].getBoundingClientRect(),"connection-table_8_"),showTooltip("Vertical Screen",$("#stand_4_")[0].getBoundingClientRect(),"stand_4_")}}function onClickOfSkills(a){resetAll(),document.querySelector(".hamburger-container").click(),$(".skills-option[value='"+a.getAttribute("data-skill")+"']").click()}function resetAll(){resetView(),resetExplore(),$("#hubs").css("opacity",1),$(".others").css("opacity",.1),$(".reset-filters").click(),$(".info-panel").css("display","none"),$("svg").css("pointer-events",""),$(".reset-icon-area").css("display","none"),$("#spade-explore").css("display","block"),$("#intro").css("display","block"),$("#description_panel").css("display","none"),$(".explore-action-area").css("display","block"),$("#desc-text").css("display","none"),filter_state="closed",global_view="default"}function resetExplore(a){$("#hub-2").css("opacity",1),$("#hub-3").css("opacity",1),$("#hub-4").css("opacity",1),$("#s_mp").css("opacity",1),$("#hole_4_").css("opacity",1),$("#hub-1 .desk").css("opacity",1),$("#desk5 .tripod").css("opacity",1),$("#desk5 .connection").css("opacity",1),$("#s_ep5").css("opacity",1),$("#s_ep5_sp2_emp2").css("opacity",1),$("#s_ep5_sp2_emp1").css("opacity",1),$("#explore").css("display","block"),$("#explore-title").css("display","inline-block"),$("#prev").css("display","none"),$("#next").css("display","none"),$("#prev").attr("data-step","1"),$("#prev").removeClass("disabled-button"),$("#next").attr("data-step","1"),$("#next").removeClass("disabled-button"),$("#transition_text").html("")}function showFilterReset(){$("#svg").css("pointer-events","none"),$(".reset-filters").css("display","inline-block")}function hideFilterReset(){$("#svg").css("pointer-events","all"),$(".reset-filters").css("display","none")}function resetView(){var a=d3.select("#spade").node().getBBox().x,b=d3.select("#spade").node().getBBox().y,c=d3.select("#spade").node().getBBox().height,d=d3.select("#spade").node().getBBox().width;d3.select("svg").transition().duration(2e3).attr("viewBox",a+" "+b+" "+d+" "+c).attr("preserveAspectRatio","xMidYMid meet"),$("#svg").css("pointer-events","all"),$(".explore-tooltip").remove();var e=setTimeout(function(){$(".explore-tooltip").remove(),clearTimeout(e)},2e3)}function blockExplorePrevAndNext(){$("#prev").css("opacity","0.5").css("pointer-events","none"),$("#next").css("opacity","0.5").css("pointer-events","none"),$("#nav-toggle").css("opacity","0.5").css("pointer-events","none"),$(".reset-icon-area").css("opacity","0.5").css("pointer-events","none")}function unblockExplorePrevAndNext(){$("#prev").css("opacity","").css("pointer-events",""),$("#next").css("opacity","").css("pointer-events",""),$("#nav-toggle").css("opacity","").css("pointer-events",""),$(".reset-icon-area").css("opacity","").css("pointer-events","")}String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};var height=d3.select("#display_area").node().getBoundingClientRect().height,width=d3.select("#display_area").node().getBoundingClientRect().width,x=d3.select("#spade").node().getBBox().x,y=d3.select("#spade").node().getBBox().y,w=d3.select("#spade").node().getBBox().width,h=d3.select("#spade").node().getBBox().height;d3.select("#svg").attr("height",height).attr("width",width).attr("viewBox",x+" "+y+" "+w+" "+h),d3.select("#Layer_1").attr("height",height).attr("width",width).attr("viewBox",x+" "+y+" "+w+" "+h);var experience_text={"Managing Producer":"10+ yrs","Executive Producer":"8+ yrs","Chief Producer":"5+ yrs","Senior Producer":"5+ yrs",Producer:"3+ yrs","Associate Producer":"3+ yrs","Assistant Producer":"1+ yrs","Trainee Producer":"0 yrs"},global_view="default",filter_state="closed";$(".ep").on("mouseover",function(a){$(".desk").css("opacity",.3),$(".hub-table").css("opacity",.3),this.parentNode.style.opacity=1}),$(".ep").on("mouseout",function(a){$(".desk").css("opacity",1),$(".hub-table").css("opacity",1)}),$(".sp").on("mouseover",function(a){$(".tripod").css("opacity",.3),$(".connection").css("opacity",.3),$(".ep").css("opacity",.3),$(".hub-table").css("opacity",.3);var b=$(this),c=b.parent();c.css("opacity",1)}),$(".sp").on("mouseout",function(a){$(".tripod").css("opacity",1),$(".connection").css("opacity",1),$(".ep").css("opacity",1),$(".hub-table").css("opacity",1)}),$(".junior").on("mouseover",function(a){$(".junior").css("opacity",.3),$(".sp").css("opacity",.3),$(".ep").css("opacity",.3),$(".hub-table").css("opacity",.3),$(".connection").css("opacity",.3),$(".hole").css("opacity",.3),$(this).css("opacity",1)}),$(".junior").on("mouseout",function(){$(".junior").css("opacity",1),$(".sp").css("opacity",1),$(".ep").css("opacity",1),$(".hub-table").css("opacity",1),$(".connection").css("opacity",1),$(".hole").css("opacity",1)});var step=1,x1,y1,h1,h2,x2,y2,h2,w2,x3,y3,h3,w3,x4,y4,h4,w4,x5,y5,h5,w5,x6,y6,h6,w6,desc_var;$("#explore").on("click",function(){var a=$(".reset-icon-area").css("display"),b=$(".reset-filters").css("display");"open"===filter_state&&$("#nav-toggle-cross").click(),"block"===a||"inline-block"===b?(resetAll(),$("#explore").css("display","none"),$("#intro").css("display","none"),$("#desc-text").css("display","block"),$(".reset-icon-area").css("display","block")):($("#explore").css("display","none"),$("#intro").css("display","none"),$("#desc-text").css("display","block"),$(".reset-icon-area").css("display","block"),$(".explore-tooltip").remove()),x1=d3.select("#s_ep5_sp2").node().getBBox().x,y1=d3.select("#s_ep5_sp2").node().getBBox().y,h1=d3.select("#s_ep5_sp2").node().getBBox().height,w1=d3.select("#s_ep5_sp2").node().getBBox().width,d3.select("svg").transition().duration(2e3).attr("viewBox",x1+" "+y1+" "+w1+" "+h1).attr("preserveAspectRatio","xMidYMid meet"),$("#hub-2").css("opacity",.1),$("#hub-3").css("opacity",.1),$("#hub-4").css("opacity",.1),$("#s_mp").css("opacity",.1),$("#hole_4_").css("opacity",.1),$(".others").css("opacity",.1),d3.selectAll("#hub-1 .desk").filter(function(a,b){return"desk5"!==this.id}).style("opacity",.1),d3.selectAll("#desk5 .tripod").filter(function(a,b){
return"tripod-table-2_3_"!==this.id}).style("opacity",.1),$("#desk5 .connection").css("opacity",.1),$("#s_ep5").css("opacity",.1),$("#s_ep5_sp2_emp2").css("opacity",.1),$("#s_ep5_sp2_emp1").css("opacity",.1),desc_var=d3.select("#desc-text"),desc_var.html(""),desc_var.html('<div class="sub-heading">Workstation</div><p>A Workstation is the most basic component in the SPADE work/organisation structure. The one seen here, as will become clear in the next steps, is occupied by specialists with five or more years of experience, designated as Chief or Senior Producers.</p>'),$("#prev").addClass("disabled-button"),$("#prev").css("display","block"),$("#next").css("display","block"),$("#explore-title").css("display","none"),$("#svg").css("pointer-events","none");var c=setTimeout(function(){attachTooltipEvents("1"),clearTimeout(c)},2e3);blockExplorePrevAndNext();var d=setTimeout(function(){unblockExplorePrevAndNext(),clearTimeout(d)},2e3);"inline-block"===$(".reset-filters").css("display")&&$(".reset-filters").click()}),$("#next").on("click",function(){var a=this.getAttribute("data-step");transition(a),a=+a+1,a>=1&&$(".left-arrow").removeClass("disabled-button"),8===a&&$(".right-arrow").addClass("disabled-button"),$(".left-arrow").attr("data-step",a),$(".right-arrow").attr("data-step",a)}),$("#prev").on("click",function(){var a=this.getAttribute("data-step");a=+a-1,1===a&&$(".left-arrow").addClass("disabled-button"),a<=7&&$(".right-arrow").removeClass("disabled-button"),transition(a.toString(),!0),$(".left-arrow").attr("data-step",a),$(".right-arrow").attr("data-step",a)}),$(".hub-table").on("mouseover",function(a){$(".hub").css("opacity",.3),this.parentNode.style.opacity=1,$(".others").css("opacity",.1)}),$(".hub-table").on("mouseout",function(a){$(".hub").css("opacity",1),$(".others").css("opacity",.1)}),$(".washroom .overlay-rect").on("mouseover",function(a){$(".washroom").css("opacity",1)}),$(".washroom .overlay-rect").on("mouseout",function(a){"default"===global_view&&$(".washroom").css("opacity",.1)}),$(".reading-room .overlay-rect").on("mouseover",function(a){$(".reading-room").css("opacity",1)}),$(".reading-room .overlay-rect").on("mouseout",function(a){"default"===global_view&&$(".reading-room").css("opacity",.1)}),$(".operations-room .overlay-rect").on("mouseover",function(a){$(".operations-room").css("opacity",1)}),$(".operations-room .overlay-rect").on("mouseout",function(a){"default"===global_view&&$(".operations-room").css("opacity",.1)}),$(".makeup-room .overlay-rect").on("mouseover",function(a){$(".makeup-room").css("opacity",1)}),$(".makeup-room .overlay-rect").on("mouseout",function(a){"default"===global_view&&$(".makeup-room").css("opacity",.1)}),$(".booth .overlay-rect").on("mouseover",function(a){$(".booth").css("opacity",1)}),$(".booth .overlay-rect").on("mouseout",function(a){"default"===global_view&&$(".booth").css("opacity",.1)}),$(".small-stage .overlay-rect").on("mouseover",function(a){$(".small-stage").css("opacity",1)}),$(".small-stage .overlay-rect").on("mouseout",function(a){"default"===global_view&&$(".small-stage").css("opacity",.1)}),$(".recording-booth .overlay-rect").on("mouseover",function(a){$(".recording-booth").css("opacity",1)}),$(".recording-booth .overlay-rect").on("mouseout",function(a){"default"===global_view&&$(".recording-booth").css("opacity",.1)}),$(".studio .overlay-rect").on("mouseover",function(a){$(".studio").css("opacity",1)}),$(".studio .overlay-rect").on("mouseout",function(a){"default"===global_view&&$(".studio").css("opacity",.1)}),$("#lobby").on("mouseover",function(){d3.select("#lobby").style("opacity",1)}),$("#lobby").on("mouseout",function(){"default"===global_view&&d3.select("#lobby").style("opacity",.1)}),$("#server-room").on("mouseover",function(){d3.select("#server-room").style("opacity",1)}),$("#server-room").on("mouseout",function(){"default"===global_view&&d3.select("#server-room").style("opacity",.1)}),$("#cafe").on("mouseover",function(){d3.select("#cafe").style("opacity",1)}),$("#cafe").on("mouseout",function(){"default"===global_view&&d3.select("#cafe").style("opacity",.1)}),$("#side-area-right").on("mouseover",function(){d3.select("#side-area-right").style("opacity",1)}),$("#side-area-right").on("mouseout",function(){"default"===global_view&&d3.select("#side-area-right").style("opacity",.1)}),$("#side-area").on("mouseover",function(){d3.select("#side-area").style("opacity",1)}),$("#side-area").on("mouseout",function(){"default"===global_view&&d3.select("#side-area").style("opacity",.1)}),$("#hall").on("mouseover",function(){d3.select("#hall").style("opacity",1)}),$("#hall").on("mouseout",function(){"default"===global_view&&d3.select("#hall").style("opacity",.1)}),$("#extra").on("mouseover",function(){d3.select("#hall").style("opacity",1)}),$("#extra").on("mouseout",function(){"default"===global_view&&d3.select("#hall").style("opacity",.1)}),$("#stage-hub .overlay-rect").on("mouseover",function(){d3.select("#stage-hub").style("opacity",1)}),$("#stage-hub .overlay-rect").on("mouseout",function(){"default"===global_view&&d3.select("#stage-hub").style("opacity",.1)}),$("#center-hub .overlay-rect").on("mouseover",function(){d3.select("#center-hub").style("opacity",1)}),$("#center-hub .overlay-rect").on("mouseout",function(){"default"===global_view&&d3.select("#center-hub").style("opacity",.1)});var count=0,filters,d,sidebar=document.getElementById("sidebar"),collapsable_filter=document.getElementById("filters_div");sideBar();var zoom,ele,ele1,str,n,e_x1,e_y1,e_w1,e_h1,e_x2,e_y2,e_w2,e_h2,e_x3,e_y3,e_w3,e_h3,e_x4,e_y4,e_w4,e_h4;$(".table").on("click",function(){"open"===filter_state&&$("#nav-toggle-cross").click(),$(".reset-icon-area").css("display","block"),$("#intro").css("display","none"),$(".explore-action-area").css("display","none");var b=$(this).parent().closest("g").attr("id");ele=$("#"+b).attr("class"),ele1=$("#"+b).parents(),str=""+b,s=str.includes("s_"),p=str.includes("p_"),a=str.includes("a_"),d=str.includes("d_"),s?(e_x1=d3.select("#hub-1").node().getBBox().x,e_y1=d3.select("#hub-1").node().getBBox().y,e_h1=d3.select("#hub-1").node().getBBox().height,e_w1=d3.select("#hub-1").node().getBBox().width,d3.select("#svg").transition().duration(2e3).attr("viewBox",e_x1+" "+e_y1+" "+e_w1+" "+e_h1)):p?(e_x2=d3.select("#hub-2").node().getBBox().x,e_y2=d3.select("#hub-2").node().getBBox().y,e_h2=d3.select("#hub-2").node().getBBox().height,e_w2=d3.select("#hub-2").node().getBBox().width,d3.select("#svg").transition().duration(2e3).attr("viewBox",e_x2+" "+e_y2+" "+e_w2+" "+e_h2)):a?(e_x3=d3.select("#hub-3").node().getBBox().x,e_y3=d3.select("#hub-3").node().getBBox().y,e_h3=d3.select("#hub-3").node().getBBox().height,e_w3=d3.select("#hub-3").node().getBBox().width,d3.select("#svg").transition().duration(2e3).attr("viewBox",e_x3+" "+e_y3+" "+e_w3+" "+e_h3)):d&&(e_x4=d3.select("#hub-4").node().getBBox().x,e_y4=d3.select("#hub-4").node().getBBox().y,e_h4=d3.select("#hub-4").node().getBBox().height,e_w4=d3.select("#hub-4").node().getBBox().width,d3.select("#svg").transition().duration(2e3).attr("viewBox",e_x4+" "+e_y4+" "+e_w4+" "+e_h4)),showDescription(b)});var other,o_x,o_y,o_w,o_h;$(".others .overlay-rect").each(function(a,b){b.onclick=function(){"open"===filter_state&&$("#nav-toggle-cross").click(),$("#desc-text").html(""),global_view="zoomed",other=b.closest("g").id,$(".reset-icon-area").css("display","block"),$("#desc-text").css("display","none"),$("#intro").css("display","none"),$("#description_panel").css("display","none"),$("#spade-explore").css("display","none"),$(".reset-icon-area").css("display","block"),$(".explore-tooltip").remove(),$("#svg").css("pointer-events","none"),o_x=d3.select("#"+other).node().getBBox().x,o_y=d3.select("#"+other).node().getBBox().y,o_w=d3.select("#"+other).node().getBBox().width,o_h=d3.select("#"+other).node().getBBox().height,d3.select("svg").transition().duration(2e3).attr("viewBox",o_x+" "+(o_y-20)+" "+o_w+" "+(o_h+40)),d3.selectAll("#"+other).style("opacity",1),d3.select("#hubs").style("opacity",.1);var a,c=$(this).parent();"booth"===c.attr("class").split(" ")[1]?a="WebEx Booth":"small-stage"===c.attr("class").split(" ")[1]?a="Standups Stage":"recording-booth"===c.attr("class").split(" ")[1]?a="Voiceover Booth":"operations-room"===c.attr("class").split(" ")[1]?a="TV PCR":"studio"===c.attr("class").split(" ")[1]?a="TV studio":"washroom"===c.attr("class").split(" ")[1]?a="Washroom":"makeup-room"===c.attr("class").split(" ")[1]?a="Dressing Room":"reading-room"===c.attr("class").split(" ")[1]?a="Records Room":"lobby"===c.attr("id")?a="Reception":"server-room"===c.attr("id")?a="Server Room":"extra"===c.attr("id")?a="Extra":"hall"===c.attr("id")?a="Training Room":"cafe"===c.attr("id")?a="Cafeteria":"side-area-right"===c.attr("id")?a="Sleeping Lounge":"side-area"===c.attr("id")?a="Meeting Lounge":"center-hub"===c.attr("id")?a="Conference Room":"stage-hub"===c.attr("id")&&(a="Auditorium + PCR"),setTimeout(function(){showOthersTooltip(a,c)},2e3)}});var info;$("#close").on("click",function(){document.getElementById("info-panel").style.display="none"});var result,a;$("#nav-toggle-cross").on("click",function(){var a=$(".collapsable-filters-div");a.css("left","-250px"),$(".hamburger-container").css("display","block"),$(".explore-tooltip").remove(),filter_state="closed"}),$(".hamburger-container").on("click",function(){var a=$(".collapsable-filters-div");$(".hamburger-container").css("display","none"),a.css("left","0px"),$(".explore-tooltip").remove(),resetView(),$(".reset-icon-area").click(),deHighlightAll(),highlightAll(),filter_state="open"}),$(document).on("click",function(a){var b=$(a.srcElement);b=b.parent().closest(".collapsable-filters-div"),b[0]||($("#label_display").css("display","none"),$("#label_toogle")[0].checked=!1)}),$(".reset-icon-area").on("click",function(){resetAll()}),$(".read-more-button").on("click",function(){$(this).remove(),$("#read_more_text").css("display","")});